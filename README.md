# 一个基于netty的命令行斗地主游戏(命令行的流程控制太难啦!!!)

**技术选型**

1. 使用netty + tcp协议
2. 使用netty的'LineBasedFrameDecoder'对象来实现粘包半包问题,也就是说每次发送数据都要以一个换行符来结尾
3. 其他工具有log4j来做debug、fastjson做部分对象序列化(使用方便)、还有lombok


**收获和说明**

1. 首先做这个小项目主要是对自己的算法和编程能力进行一个锻炼，比如困难的点有
    - 对扑克牌组的存储数据结构（双端链表）、链表排序实现
    - 用户出牌的输入序列有效性的验证、以及客户端对输入的字符串序列进行牌型的判断(三带一、飞机、炸弹等等牌型)
    - 优雅的对牌组之间进行大小比较
    - 使用volatile关键字对流程进行控制
2. 另外也加深自己对netty的了解，以后做复杂应用时netty也是一个非常好的工具
3. 客户端用scanner来实现，实现起来非常困难以及不优雅，因为一旦进入输入阻塞，我不知道如何主动结束,
有时间会做一个html + webSocket的;
4. 可能有bug...

**玩法**

进入游戏输入help即可查看相关指令的用法
1. 基础
```

leave ==> 离开当前房间
ready ==> 准备开始游戏,在房间中可用, 最后一个玩家准备就绪会自动开始,准备状态下使用会进入待准备状态
create ==> 创建一个房间,不在房间中可用
join ==> 加入一个房间,比如加入房间号为6的房间: join@6
list ==> 展示房间列表,不在房间中可用
room ==> 查看当前的房间状态,在房间中才可用
```
2. 出牌相关,输入对应字符即可,顺序随意,不会影响结果
```

A => 1,a,A
2 => 2
3 => 3
4 => 4
5 => 5
6 => 6
7 => 7
8 => 8
9 => 9
10 => 0
J => j,J
Q => q,Q
K => k,K
小王 => s
大王 => S
```

**end**
